{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Fragment } from 'react';\nimport Properties from './Properties';\nimport MessageContainer from './MessageContainer';\n\nvar ProductsCreate = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProductsCreate, _React$Component);\n\n  var _super = _createSuper(ProductsCreate);\n\n  function ProductsCreate(props) {\n    var _this;\n\n    _classCallCheck(this, ProductsCreate);\n\n    _this = _super.call(this, props);\n\n    _this.submitData = function () {\n      fetch(\"/send_data\", {\n        method: 'POST',\n        body: JSON.stringify({\n          name: _this.state.name,\n          upc: _this.state.upc,\n          availableOn: _this.state.availableOn,\n          properties: _this.state.properties\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin'\n      }).then(function (response) {\n        // if any errors set error state to true which brings up error messsage\n        if (response.status !== 204) {\n          _this.setState({\n            error: true\n          });\n\n          return;\n        } else {\n          // if response is ok clear state and inputs\n          _this.refs.name.value = '';\n          _this.refs.upc.value = '';\n          _this.refs.date.value = '';\n\n          _this.setState({\n            name: '',\n            upc: '',\n            availableOn: '',\n            propertyName: '',\n            propertyValue: '',\n            properties: [],\n            error: false,\n            saved: true\n          }); // show saved message for 5 seconds\n\n\n          setTimeout(function () {\n            _this.setState({\n              saved: false\n            });\n          }, 5000);\n        }\n\n        return response.json;\n      });\n    };\n\n    _this.clickHandler = function (e) {\n      e.preventDefault();\n\n      if (e.target.id === 'save') {\n        _this.submitData();\n      }\n\n      if (e.target.id === 'properties') {\n        _this.updateProperties();\n      }\n    };\n\n    _this.updateProperties = function (e) {\n      var propertyObj = {\n        name: _this.state.propertyName,\n        value: _this.state.propertyValue\n      }; //takes a copy of current state and then concats additional properties added by user\n\n      _this.setState({\n        properties: _this.state.properties.concat(propertyObj)\n      });\n\n      _this.setState({\n        propertyName: ''\n      });\n\n      _this.setState({\n        propertyValue: ''\n      });\n\n      _this.refs.propertyName.value = '';\n      _this.refs.propertyValue.value = '';\n    };\n\n    _this.state = {\n      name: '',\n      upc: '',\n      availableOn: '',\n      propertyName: '',\n      propertyValue: '',\n      properties: [],\n      error: false,\n      saved: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ProductsCreate, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      if (e.target.name === 'name') {\n        this.setState({\n          name: e.target.value\n        });\n      }\n\n      if (e.target.name === 'upc') {\n        this.setState({\n          upc: e.target.value\n        });\n      }\n\n      if (e.target.name === 'date') {\n        this.setState({\n          availableOn: e.target.value\n        });\n      }\n\n      if (e.target.name === 'propertyName') {\n        this.setState({\n          propertyName: e.target.value\n        });\n      }\n\n      if (e.target.name === 'propertyValue') {\n        this.setState({\n          propertyValue: e.target.value\n        });\n      }\n    } //sends data to POST route.\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(MessageContainer, {\n        properties: this.state.error,\n        saved: this.state.saved\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form_container\"\n      }, /*#__PURE__*/React.createElement(\"h1\", null, \"Products\"), /*#__PURE__*/React.createElement(\"form\", null, /*#__PURE__*/React.createElement(\"label\", null, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        ref: \"name\",\n        name: \"name\",\n        onChange: this.handleChange\n      }), /*#__PURE__*/React.createElement(\"label\", null, \"UPC\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        ref: \"upc\",\n        name: \"upc\",\n        onChange: this.handleChange\n      }), /*#__PURE__*/React.createElement(\"label\", null, \"Availiable On\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        ref: \"date\",\n        name: \"date\",\n        placeholder: \"mm/dd/yyyy\",\n        onChange: this.handleChange\n      }), /*#__PURE__*/React.createElement(\"h1\", null, \"Properties\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"property_container\"\n      }, /*#__PURE__*/React.createElement(\"label\", null, \"Property Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"propertyName\",\n        onChange: this.handleChange,\n        ref: \"propertyName\"\n      }), /*#__PURE__*/React.createElement(\"label\", null, \"Property Value\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"propertyValue\",\n        onChange: this.handleChange,\n        ref: \"propertyValue\"\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        id: \"properties\",\n        onClick: this.clickHandler\n      }, \"Add Properties\"), /*#__PURE__*/React.createElement(\"button\", {\n        id: \"save\",\n        onClick: this.clickHandler\n      }, \"Save\")), /*#__PURE__*/React.createElement(Properties, {\n        properties: this.state.properties\n      })));\n    }\n  }]);\n\n  return ProductsCreate;\n}(React.Component);\n\nexport default ProductsCreate;","map":{"version":3,"sources":["/Users/danielbrown/Documents/SpringBoard/highlands-master/app/javascript/components/ProductsCreate.js"],"names":["React","Fragment","Properties","MessageContainer","ProductsCreate","props","submitData","fetch","method","body","JSON","stringify","name","state","upc","availableOn","properties","headers","credentials","then","response","status","setState","error","refs","value","date","propertyName","propertyValue","saved","setTimeout","json","clickHandler","e","preventDefault","target","id","updateProperties","propertyObj","concat","handleChange","bind","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;;IAEMC,c;;;;;AACJ,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UAmCnBC,UAnCmB,GAmCN,YAAM;AACjBC,MAAAA,KAAK,eAAe;AAClBC,QAAAA,MAAM,EAAE,MADU;AAElBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,IAAI,EAAE,MAAKC,KAAL,CAAWD,IADE;AAEnBE,UAAAA,GAAG,EAAE,MAAKD,KAAL,CAAWC,GAFG;AAGnBC,UAAAA,WAAW,EAAE,MAAKF,KAAL,CAAWE,WAHL;AAInBC,UAAAA,UAAU,EAAE,MAAKH,KAAL,CAAWG;AAJJ,SAAf,CAFY;AAQlBC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SARS;AAWlBC,QAAAA,WAAW,EAAE;AAXK,OAAf,CAAL,CAYGC,IAZH,CAYQ,UAAAC,QAAQ,EAAI;AAClB;AACA,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,gBAAKC,QAAL,CAAc;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAd;;AACA;AACD,SAHD,MAGO;AACL;AACA,gBAAKC,IAAL,CAAUZ,IAAV,CAAea,KAAf,GAAuB,EAAvB;AACA,gBAAKD,IAAL,CAAUV,GAAV,CAAcW,KAAd,GAAsB,EAAtB;AACA,gBAAKD,IAAL,CAAUE,IAAV,CAAeD,KAAf,GAAuB,EAAvB;;AACA,gBAAKH,QAAL,CAAc;AACZV,YAAAA,IAAI,EAAE,EADM;AAEZE,YAAAA,GAAG,EAAE,EAFO;AAGZC,YAAAA,WAAW,EAAE,EAHD;AAIZY,YAAAA,YAAY,EAAE,EAJF;AAKZC,YAAAA,aAAa,EAAE,EALH;AAMZZ,YAAAA,UAAU,EAAE,EANA;AAOZO,YAAAA,KAAK,EAAE,KAPK;AAQZM,YAAAA,KAAK,EAAE;AARK,WAAd,EALK,CAeL;;;AACAC,UAAAA,UAAU,CAAC,YAAM;AACf,kBAAKR,QAAL,CAAc;AAAEO,cAAAA,KAAK,EAAE;AAAT,aAAd;AACD,WAFS,EAEP,IAFO,CAAV;AAGD;;AAED,eAAOT,QAAQ,CAACW,IAAhB;AACD,OAvCD;AAwCD,KA5EkB;;AAAA,UA+EnBC,YA/EmB,GA+EJ,UAAAC,CAAC,EAAI;AAClBA,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAID,CAAC,CAACE,MAAF,CAASC,EAAT,KAAgB,MAApB,EAA4B;AAC1B,cAAK9B,UAAL;AACD;;AACD,UAAI2B,CAAC,CAACE,MAAF,CAASC,EAAT,KAAgB,YAApB,EAAkC;AAChC,cAAKC,gBAAL;AACD;AACF,KAvFkB;;AAAA,UA0FnBA,gBA1FmB,GA0FA,UAAAJ,CAAC,EAAI;AACtB,UAAMK,WAAW,GAAG;AAClB1B,QAAAA,IAAI,EAAE,MAAKC,KAAL,CAAWc,YADC;AAElBF,QAAAA,KAAK,EAAE,MAAKZ,KAAL,CAAWe;AAFA,OAApB,CADsB,CAKtB;;AACA,YAAKN,QAAL,CAAc;AAAEN,QAAAA,UAAU,EAAE,MAAKH,KAAL,CAAWG,UAAX,CAAsBuB,MAAtB,CAA6BD,WAA7B;AAAd,OAAd;;AACA,YAAKhB,QAAL,CAAc;AAAEK,QAAAA,YAAY,EAAE;AAAhB,OAAd;;AACA,YAAKL,QAAL,CAAc;AAAEM,QAAAA,aAAa,EAAE;AAAjB,OAAd;;AACA,YAAKJ,IAAL,CAAUG,YAAV,CAAuBF,KAAvB,GAA+B,EAA/B;AACA,YAAKD,IAAL,CAAUI,aAAV,CAAwBH,KAAxB,GAAgC,EAAhC;AACD,KArGkB;;AAGjB,UAAKZ,KAAL,GAAa;AACXD,MAAAA,IAAI,EAAE,EADK;AAEXE,MAAAA,GAAG,EAAE,EAFM;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXY,MAAAA,YAAY,EAAE,EAJH;AAKXC,MAAAA,aAAa,EAAE,EALJ;AAMXZ,MAAAA,UAAU,EAAE,EAND;AAOXO,MAAAA,KAAK,EAAE,KAPI;AAQXM,MAAAA,KAAK,EAAE;AARI,KAAb;AAUA,UAAKW,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AAbiB;AAclB;;;;iCAEYR,C,EAAG;AACd,UAAIA,CAAC,CAACE,MAAF,CAASvB,IAAT,KAAkB,MAAtB,EAA8B;AAC5B,aAAKU,QAAL,CAAc;AAAEV,UAAAA,IAAI,EAAEqB,CAAC,CAACE,MAAF,CAASV;AAAjB,SAAd;AACD;;AACD,UAAIQ,CAAC,CAACE,MAAF,CAASvB,IAAT,KAAkB,KAAtB,EAA6B;AAC3B,aAAKU,QAAL,CAAc;AAAER,UAAAA,GAAG,EAAEmB,CAAC,CAACE,MAAF,CAASV;AAAhB,SAAd;AACD;;AACD,UAAIQ,CAAC,CAACE,MAAF,CAASvB,IAAT,KAAkB,MAAtB,EAA8B;AAC5B,aAAKU,QAAL,CAAc;AAAEP,UAAAA,WAAW,EAAEkB,CAAC,CAACE,MAAF,CAASV;AAAxB,SAAd;AACD;;AACD,UAAIQ,CAAC,CAACE,MAAF,CAASvB,IAAT,KAAkB,cAAtB,EAAsC;AACpC,aAAKU,QAAL,CAAc;AAAEK,UAAAA,YAAY,EAAEM,CAAC,CAACE,MAAF,CAASV;AAAzB,SAAd;AACD;;AACD,UAAIQ,CAAC,CAACE,MAAF,CAASvB,IAAT,KAAkB,eAAtB,EAAuC;AACrC,aAAKU,QAAL,CAAc;AAAEM,UAAAA,aAAa,EAAEK,CAAC,CAACE,MAAF,CAASV;AAA1B,SAAd;AACD;AACF,K,CAED;;;;6BAqES;AACP,0BACE,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWU,KADzB;AAEE,QAAA,KAAK,EAAE,KAAKV,KAAL,CAAWgB;AAFpB,QADF,eAKE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,2CADF,eAEE,+CACE,0CADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,GAAG,EAAC,MAFN;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,QAAQ,EAAE,KAAKW;AAJjB,QAFF,eAQE,yCARF,eASE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,GAAG,EAAC,KAFN;AAGE,QAAA,IAAI,EAAC,KAHP;AAIE,QAAA,QAAQ,EAAE,KAAKA;AAJjB,QATF,eAeE,mDAfF,eAgBE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,GAAG,EAAC,MAFN;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,WAAW,EAAC,YAJd;AAKE,QAAA,QAAQ,EAAE,KAAKA;AALjB,QAhBF,eAuBE,6CAvBF,eAwBE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,mDADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,cAFP;AAGE,QAAA,QAAQ,EAAE,KAAKA,YAHjB;AAIE,QAAA,GAAG,EAAC;AAJN,QAFF,eAQE,oDARF,eASE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,eAFP;AAGE,QAAA,QAAQ,EAAE,KAAKA,YAHjB;AAIE,QAAA,GAAG,EAAC;AAJN,QATF,CAxBF,eAwCE;AAAQ,QAAA,EAAE,EAAC,YAAX;AAAwB,QAAA,OAAO,EAAE,KAAKR;AAAtC,0BAxCF,eA2CE;AAAQ,QAAA,EAAE,EAAC,MAAX;AAAkB,QAAA,OAAO,EAAE,KAAKA;AAAhC,gBA3CF,CAFF,eAiDE,oBAAC,UAAD;AAAY,QAAA,UAAU,EAAE,KAAKnB,KAAL,CAAWG;AAAnC,QAjDF,CALF,CADF;AA2DD;;;;EApK0BhB,KAAK,CAAC0C,S;;AAuKnC,eAAetC,cAAf","sourcesContent":["import React, { Fragment } from 'react';\nimport Properties from './Properties';\nimport MessageContainer from './MessageContainer';\n\nclass ProductsCreate extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      upc: '',\n      availableOn: '',\n      propertyName: '',\n      propertyValue: '',\n      properties: [],\n      error: false,\n      saved: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    if (e.target.name === 'name') {\n      this.setState({ name: e.target.value });\n    }\n    if (e.target.name === 'upc') {\n      this.setState({ upc: e.target.value });\n    }\n    if (e.target.name === 'date') {\n      this.setState({ availableOn: e.target.value });\n    }\n    if (e.target.name === 'propertyName') {\n      this.setState({ propertyName: e.target.value });\n    }\n    if (e.target.name === 'propertyValue') {\n      this.setState({ propertyValue: e.target.value });\n    }\n  }\n\n  //sends data to POST route.\n  submitData = () => {\n    fetch(`/send_data`, {\n      method: 'POST',\n      body: JSON.stringify({\n        name: this.state.name,\n        upc: this.state.upc,\n        availableOn: this.state.availableOn,\n        properties: this.state.properties\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'same-origin'\n    }).then(response => {\n      // if any errors set error state to true which brings up error messsage\n      if (response.status !== 204) {\n        this.setState({ error: true });\n        return;\n      } else {\n        // if response is ok clear state and inputs\n        this.refs.name.value = '';\n        this.refs.upc.value = '';\n        this.refs.date.value = '';\n        this.setState({\n          name: '',\n          upc: '',\n          availableOn: '',\n          propertyName: '',\n          propertyValue: '',\n          properties: [],\n          error: false,\n          saved: true\n        });\n        // show saved message for 5 seconds\n        setTimeout(() => {\n          this.setState({ saved: false });\n        }, 5000);\n      }\n\n      return response.json;\n    });\n  };\n\n  // click handler for saving of the data and adding of properties\n  clickHandler = e => {\n    e.preventDefault();\n    if (e.target.id === 'save') {\n      this.submitData();\n    }\n    if (e.target.id === 'properties') {\n      this.updateProperties();\n    }\n  };\n\n  //updates properties array with data from inputs\n  updateProperties = e => {\n    const propertyObj = {\n      name: this.state.propertyName,\n      value: this.state.propertyValue\n    };\n    //takes a copy of current state and then concats additional properties added by user\n    this.setState({ properties: this.state.properties.concat(propertyObj) });\n    this.setState({ propertyName: '' });\n    this.setState({ propertyValue: '' });\n    this.refs.propertyName.value = '';\n    this.refs.propertyValue.value = '';\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MessageContainer\n          properties={this.state.error}\n          saved={this.state.saved}\n        />\n        <div className=\"form_container\">\n          <h1>Products</h1>\n          <form>\n            <label>Name</label>\n            <input\n              type=\"text\"\n              ref=\"name\"\n              name=\"name\"\n              onChange={this.handleChange}\n            />\n            <label>UPC</label>\n            <input\n              type=\"text\"\n              ref=\"upc\"\n              name=\"upc\"\n              onChange={this.handleChange}\n            />\n            <label>Availiable On</label>\n            <input\n              type=\"text\"\n              ref=\"date\"\n              name=\"date\"\n              placeholder=\"mm/dd/yyyy\"\n              onChange={this.handleChange}\n            />\n            <h1>Properties</h1>\n            <div className=\"property_container\">\n              <label>Property Name</label>\n              <input\n                type=\"text\"\n                name=\"propertyName\"\n                onChange={this.handleChange}\n                ref=\"propertyName\"\n              />\n              <label>Property Value</label>\n              <input\n                type=\"text\"\n                name=\"propertyValue\"\n                onChange={this.handleChange}\n                ref=\"propertyValue\"\n              />\n            </div>\n            <button id=\"properties\" onClick={this.clickHandler}>\n              Add Properties\n            </button>\n            <button id=\"save\" onClick={this.clickHandler}>\n              Save\n            </button>\n          </form>\n          <Properties properties={this.state.properties} />\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ProductsCreate;"]},"metadata":{},"sourceType":"module"}